"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9269],{512:function(e,t,a){a.d(t,{y8:function(){return r}});a(7462),a(3366),a(7294);var n=a(3905),o=a(5710),s="https://api.cloudlayer.io/v2",r=function(e){return(0,n.kt)(o.Z,{className:"language-html",title:e.title,mdxType:"CodeBlock"},""+s+(e.path||""))}},6231:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return g},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var n=a(7462),o=a(3366),s=(a(7294),a(3905)),r=a(512),i=["components"],l={sidebar_position:2,slug:"/storage"},p="Storage",d={unversionedId:"storage",id:"storage",title:"Storage",description:"cloudlayer.io supports three different storage types.",source:"@site/docs/api-reference/storage.mdx",sourceDirName:".",slug:"/storage",permalink:"/storage",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,slug:"/storage"},sidebar:"tutorialSidebar",previous:{title:"Jobs",permalink:"/jobs"},next:{title:"Privacy",permalink:"/privacy"}},u={},c=[{value:"<code>storage</code>",id:"storage-1",level:3},{value:"No Storage",id:"no-storage",level:2},{value:"Cloud Storage",id:"cloud-storage",level:2},{value:"User Storage",id:"user-storage",level:2},{value:"User Storage Endpoints",id:"user-storage-endpoints",level:2},{value:"POST /storage",id:"post-storage",level:3},{value:"GET /storage:id",id:"get-storageid",level:3},{value:"GET /storage",id:"get-storage",level:3},{value:"DEL /storage:id",id:"del-storageid",level:3},{value:"User Storage Params",id:"user-storage-params",level:2},{value:"<code>title</code>",id:"title",level:3},{value:"<code>region</code>",id:"region",level:3},{value:"<code>secretAccessKey</code>",id:"secretaccesskey",level:3},{value:"<code>accessKeyId</code>",id:"accesskeyid",level:3},{value:"<code>bucket</code>",id:"bucket",level:3},{value:"<code>endpoint</code>",id:"endpoint",level:3}],m={toc:c};function g(e){var t=e.components,a=(0,o.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"storage"},"Storage"),(0,s.kt)("p",null,"cloudlayer.io supports three different storage types."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#no-storage"},(0,s.kt)("strong",{parentName:"a"},"No storage"))," - All calls must be synchronous, and the response returns the results immediately.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#cloud-storage"},(0,s.kt)("strong",{parentName:"a"},"Cloud Storage"))," - Calls can be synchronous or asynchronous. Your document is stored in your account using the storage included in your subscription.")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("a",{parentName:"p",href:"#user-storage"},(0,s.kt)("strong",{parentName:"a"},"User Storage"))," - All calls must be asynchronous. Configure your own private S3 compatible storage, such as AWS S3, Digital Ocean Spaces, or similar."))),(0,s.kt)("p",null,"Using the cloud storage available as part of your account is the recommended approach unless you have specific needs to use the others."),(0,s.kt)("h3",{id:"storage-1"},(0,s.kt)("inlineCode",{parentName:"h3"},"storage")),(0,s.kt)("p",null,"The bucket to store all the assets."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"{ id: <string> } | boolean")," ",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: "true"'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="No Storage"',title:'"No','Storage"':!0},'{\n  "storage": "false"\n}\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Cloud Storage"',title:'"Cloud','Storage"':!0},'{\n  "storage": "true"\n}\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="User Storage"',title:'"User','Storage"':!0},'{\n  "storage": {\n    "id": "123456ab-1234-abcd-1234-123abc12"\n  }\n}\n')),(0,s.kt)("h2",{id:"no-storage"},"No Storage"),(0,s.kt)("p",null,"All calls must be synchronous, and the response returns the results immediately."),(0,s.kt)("p",null,"Using the no storage option is the most limiting option and prevents the usage and integration of other services but may be a good option if you have sensitive documents that you want to ensure are never stored on our servers."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="Disable Storage"',title:'"Disable','Storage"':!0},'{\n  "storage": false\n}\n')),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("ul",{parentName:"div"},(0,s.kt)("li",{parentName:"ul"},"In ",(0,s.kt)("inlineCode",{parentName:"li"},"v2")," ",(0,s.kt)("inlineCode",{parentName:"li"},"storage: true")," is the default."),(0,s.kt)("li",{parentName:"ul"},"In ",(0,s.kt)("inlineCode",{parentName:"li"},"v1")," ",(0,s.kt)("inlineCode",{parentName:"li"},"storage: false")," is the default.")))),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"When using ",(0,s.kt)("inlineCode",{parentName:"p"},"No Storage"),", the asset endpoints are disabled."))),(0,s.kt)("h2",{id:"cloud-storage"},"Cloud Storage"),(0,s.kt)("p",null,"Cloud Storage is storage that gets included with your account. The size depends on the plan you selected. Using cloud storage is the preferred method. All new users and calls should prefer this method to integrate tightly with our other services and future offerings."),(0,s.kt)("p",null,"When using Cloud Storage, you can use the assets endpoints to get, list, and delete your assets."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Enable Storage"',title:'"Enable','Storage"':!0},'{\n  "storage": true\n}\n')),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"The ",(0,s.kt)("inlineCode",{parentName:"p"},"v2")," endpoint has storage enabled by default, so no configuration is required."))),(0,s.kt)("h2",{id:"user-storage"},"User Storage"),(0,s.kt)("p",null,"User Storage is the most complex of the storage options. Only supports asynchronous calls. Allows storage of your assets in your own private S3 compatible storage such as AWS S3, Digital Ocean Spaces, Wasabi, Ceph, etc."),(0,s.kt)("p",null,"The following endpoints are provided to manage user storage:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#post-storage"},"POST /storage")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#get-storageid"},"GET /storage:id")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#get-storage"},"GET /storage")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"#del-storage"},"DEL /storage:id"))),(0,s.kt)("p",null,"The storage endpoints let you manage user storage, such as add, get, list, and delete."),(0,s.kt)("p",null,"To enable user storage, you must use the storage ",(0,s.kt)("inlineCode",{parentName:"p"},"POST")," endpoint to create a user storage configuration. Then pass the id of that configuration into the request."),(0,s.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"Account information added is encrypted using bank level encryption and is kept secure at all times."))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Enabled User Storage"',title:'"Enabled',User:!0,'Storage"':!0},'{\n  "storage": {\n    "id": "123456ab-1234-abcd-1234-123abc12"\n  }\n}\n')),(0,s.kt)("p",null,"Several endpoints exist to manage User Storage. These endpoints allow adding storage accounts, getting the id of the storage account, and listing storage accounts."),(0,s.kt)("h2",{id:"user-storage-endpoints"},"User Storage Endpoints"),(0,s.kt)("p",null,"Using a plan that supports user-owned storage, such as the Enterprise plan, you can set up your S3 compatible storage instead of the built-in cloud storage that comes with your account."),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"It is important to remember that not all account types support user storage. If your plan does not support it you will receive an error when attempting to add."))),(0,s.kt)("h3",{id:"post-storage"},"POST /storage"),(0,s.kt)("p",null,"This endpoint adds a storage account. By default, it uses AWS. However, you may specify a custom endpoint to support any S3 compatible storage."),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"#user-storage-params"},"User Storage Params")," get passed into this endpoint."),(0,s.kt)(r.y8,{path:"/storage",title:"POST /storage",mdxType:"BaseUrlCodeBlock"}),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Request (AWS)"',title:'"Example',Request:!0,'(AWS)"':!0},'{\n  "title": "AWS Storage 1",\n  "region": "us-east-1",\n  "secretAccessKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n  "accessKeyId": "XXXXXXXXXXXXXXXXXXX",\n  "bucket": "mybucket"\n}\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Request (Digital Ocean Spaces)"',title:'"Example',Request:!0,"(Digital":!0,Ocean:!0,'Spaces)"':!0},'{\n  "title": "Digital Ocean Spaces",\n  "region": "us-east-1",\n  "secretAccessKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",\n  "accessKeyId": "XXXXXXXXXXXXXXXXXXX",\n  "bucket": "mybucket",\n  "endpoint": "https://nyc3.digitaloceanspaces.com"\n}\n')),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Response"',title:'"Example','Response"':!0},'{\n  "status": "success"\n}\n')),(0,s.kt)("p",null,"Returns ",(0,s.kt)("inlineCode",{parentName:"p"},"success")," or ",(0,s.kt)("inlineCode",{parentName:"p"},"error"),"."),(0,s.kt)("h3",{id:"get-storageid"},"GET /storage:id"),(0,s.kt)("p",null,"This endpoint retrieves the title and id of the storage document by id."),(0,s.kt)(r.y8,{path:"/storage/123456ab-1234-abcd-1234-123abc12",title:"GET /storage:id",mdxType:"BaseUrlCodeBlock"}),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Response"',title:'"Example','Response"':!0},'{\n  "title": "AWS Storage 1",\n  "id": "123456ab-1234-abcd-1234-123abc12"\n}\n')),(0,s.kt)("p",null,"If an error occurs or no records found will return a ",(0,s.kt)("inlineCode",{parentName:"p"},"400")," with a message indicating the reason."),(0,s.kt)("h3",{id:"get-storage"},"GET /storage"),(0,s.kt)("p",null,"This endpoint retrieves the title and id of all the storage accounts configured for your account."),(0,s.kt)(r.y8,{path:"/storage",title:"GET /storage",mdxType:"BaseUrlCodeBlock"}),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Response"',title:'"Example','Response"':!0},'[\n  {\n    "title": "AWS Storage 1",\n    "id": "123456ab-1234-abcd-1234-123abc12"\n  },\n  {\n    "title": "Digital Ocean Spaces",\n    "id": "x3df2faf-cv3f-21df-1d1d-3d5da373"\n  }\n]\n')),(0,s.kt)("p",null,"Returns an empty array ",(0,s.kt)("inlineCode",{parentName:"p"},"[]")," if no results found."),(0,s.kt)("h3",{id:"del-storageid"},"DEL /storage:id"),(0,s.kt)("p",null,"This endpoint removes the configured storage account by id."),(0,s.kt)(r.y8,{path:"/storage:id",title:"DEL /storage:id",mdxType:"BaseUrlCodeBlock"}),(0,s.kt)("p",null,"If an error occurs or no records found will return a ",(0,s.kt)("inlineCode",{parentName:"p"},"400")," with a message indicating the reason."),(0,s.kt)("h2",{id:"user-storage-params"},"User Storage Params"),(0,s.kt)("h3",{id:"title"},(0,s.kt)("inlineCode",{parentName:"h3"},"title")),(0,s.kt)("p",null,"The title of the storage credential used for reference must be unique across all storage credentials in your account."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "title": "My AWS Storage" }\n')),(0,s.kt)("h3",{id:"region"},(0,s.kt)("inlineCode",{parentName:"h3"},"region")),(0,s.kt)("p",null,"Region for the AWS region. If using an S3, compatible storage option but not AWS, follow that provider's directions. For example, Digital Ocean specifies to pass in ",(0,s.kt)("inlineCode",{parentName:"p"},"us-east-1")," for all regions."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "region": "us-east-1" }\n')),(0,s.kt)("h3",{id:"secretaccesskey"},(0,s.kt)("inlineCode",{parentName:"h3"},"secretAccessKey")),(0,s.kt)("p",null,"The SecretAccessKey provided by the provider."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "secretAccessKey": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" }\n')),(0,s.kt)("h3",{id:"accesskeyid"},(0,s.kt)("inlineCode",{parentName:"h3"},"accessKeyId")),(0,s.kt)("p",null,"The AccessKeyId provided by the provider."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "accessKeyId": "XXXXXXXXXXXXXXXXXXX" }\n')),(0,s.kt)("h3",{id:"bucket"},(0,s.kt)("inlineCode",{parentName:"h3"},"bucket")),(0,s.kt)("p",null,"The bucket to store all the assets."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Required")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "bucket": "mybucket" }\n')),(0,s.kt)("h3",{id:"endpoint"},(0,s.kt)("inlineCode",{parentName:"h3"},"endpoint")),(0,s.kt)("p",null,"The bucket to store all the assets."),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Optional")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"string"),"\n",(0,s.kt)("em",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"em"},'Default: ""'))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{ "endpoint": "https://nyc3.digitaloceanspaces.com" }\n')))}g.isMDXComponent=!0}}]);